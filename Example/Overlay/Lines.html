<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>绘制线</title>
    <style type="text/css">
        html, body {
            padding: 0;
            margin: 0;
        }

        #container {
            width: 100%;
            height: 100%;
            position: absolute;
        }
    </style>
    <script src="../../lib/MapAPI_JavaScript.min.js"></script>
</head>
<body style="overflow:hidden">
    <div id="container"></div>
    <div class="alert alert-success" style="position:absolute; left:100px; top:20px; ">
        1.拖动红色实线节点，可以再次编辑线的形状。<br />
        2.点击蓝色虚线触发回调函数。<br />
    </div>

<script type="text/javascript">
    init()

    function init() {
        // 地图初始化
        var map = new TYMapOptions();
        map.contentId = "container";
        map.lnglat = new TYLngLat(100, 35);
        map.mapLevel = 4;
        TYInitialize(map);

        // 地图配置
        TYMapTiles( new TYTilesOptions(TYEnumMapType.TY_Google_IMG));
    }
    function addline() {
        var dataArr = [], lineArr = [], lineArr2 = [];
        lineArr.push(new TYLngLat(113.08 + 2, 38.30 + 2));
        lineArr.push(new TYLngLat(114.08 + 2, 38.30 + 2));
        lineArr.push(new TYLngLat(115.08 + 2, 38.30 + 2));
        lineArr.push(new TYLngLat(116.08 + 2, 38.30 + 2));

        lineArr2.push(new TYLngLat(113.08 + 4, 38.30 + 4));
        lineArr2.push(new TYLngLat(114.08 + 4, 38.30 + 4));
        lineArr2.push(new TYLngLat(115.08 + 4, 38.30 + 4));
        lineArr2.push(new TYLngLat(116.08 + 4, 38.30 + 4));

        for (var i = 0; i < 2; i++) {
            var data = new TYLine();
            data.isEdit = true;

            data.lineId = "line" + i;
            data.lineOpacity = .7;

            if (i == 1) {
                data.lineType = "solid";
                data.lineWidth = 3;
                data.lineColor = "red";
            } else {
                data.lineType = "dashed";
                data.lineColor = "blue";
                data.lineWidth = 15;
                data.isEdit = false;
            }
            if (i == 0) data.lnglat = lineArr;
            if (i == 1) data.lnglat = lineArr2;
            dataArr.push(data)
        }
        var line = new TYLineOption();
        line.lineData = dataArr;
        line.lineState.isClearOverlay = true;
        //实例化事件参数
        var event = new TYOverlayEvent();
        event.mouseEvent = TYEnumEvent.TY_CLICK;
        event.mouseFunc = clickLine;
        line.lineState.overlayEvent = event;
        line.lineState.isSetView = true;
        TYDrawLine(line);
    }
    TYAddMapEvent(new TYEventOptions({
        event: TYEnumEvent.TY_RIGHTCLICK,
        callback: addline
    }))
    addline();
    function clickLine(e) {
        alert("触发回调事件")
        console.log(e)
    }
</script>
</body>
</html>


