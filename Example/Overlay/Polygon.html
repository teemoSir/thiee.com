<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>绘制多边形</title>
    <style type="text/css">
        html, body {
            padding: 0;
            margin: 0;
        }

        #container {
            width: 100%;
            height: 100%;
            position: absolute;
        }
       </style>
    <script src="../../lib/MapAPI_JavaScript.min.js"></script>

</head>
<body style="overflow:hidden">
    <div id="container"></div>
<script type="text/javascript">
    init()

    function init() {
        // 地图初始化
        var map = new TYMapOptions();
        map.contentId = "container";
        map.lnglat = new TYLngLat(100, 35);
        map.mapLevel = 4;
        TYInitialize(map);

        // 地图配置
        TYMapTiles( new TYTilesOptions(TYEnumMapType.TY_Google_IMG));
    }

    addpolygon();
    function addpolygon() {
        var lnglatArr = [];
        lnglatArr.push(new TYLngLat(113, 38));
        lnglatArr.push(new TYLngLat(114, 39));
        lnglatArr.push(new TYLngLat(99, 40));
        lnglatArr.push(new TYLngLat(95, 41));

        var lnglatArr2 = [];
        lnglatArr2.push(new TYLngLat(103, 40));
        lnglatArr2.push(new TYLngLat(96, 41));
        lnglatArr2.push(new TYLngLat(102, 42));
        lnglatArr2.push(new TYLngLat(94, 43));

        var arr = [];
        for (var i = 0; i < 2; i++) {
            var data = new TYPolygon();
            data.fillColor = "red";
            data.fillOpacity = 0.7;
            data.isEdit = true;
            data.lineColor = "blue";
            data.lineOpacity = 0.8;
            data.lineType = null;
            data.lineWidth = 4;
            if (i == 0) data.lnglat = lnglatArr;
            if (i == 1) data.lnglat = lnglatArr2;
            data.polygonId = "poly";
            arr.push(data);
        }

        var polygon = new TYPolygonOption();
        polygon.polygonData = arr;
        polygon.polygonState.isClearOverlay = true;
        polygon.polygonState.isSetView = true;
        //实例化事件参数
        var event = new TYOverlayEvent();
        event.mouseEvent = TYEnumEvent.TY_DOUBLECLICK;
        event.mouseFunc = clickPolygon;

        polygon.polygonState.overlayEvent = event;
        TYDrawPolygon(polygon);

    }

    TYAddMapEvent(new TYEventOptions({
        event: TYEnumEvent.TY_RIGHTCLICK,
        callback: addpolygon
    }))

    function clickPolygon(e) {
        alert("双击多边形出发了回调函数");
        console.log(e)
    }
</script>
</body>
</html>


