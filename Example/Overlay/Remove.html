<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>批量点绘制</title>
    <style type="text/css">
        html, body {
            padding: 0;
            margin: 0;
        }

        #container {
            width: 100%;
            height: 100%;
            position: absolute;
        }
    </style>
    <script src="../../Scripts/MapAPI_JavaScript.js"></script>
    <script src="../../Scripts/jquery-1.9.1.min.js"></script>
    <link href="../../Content/bootstrap.min.css" rel="stylesheet" />
</head>
<body style="overflow:hidden">
    <div id="container"></div>
    <div class="alert alert-success" style="position:absolute;left:100px;top:20px;">
        <label>提示：</label><br />
        1.删除id为circle0的覆盖物可以删除一个圆<br>
        2.全部删除会清空地图<br>
        
    </div>

   
    <div  style="right :20px; position:absolute; top:60px">
     
        <input class="btn btn-default" type="button" id="111" onclick="TYRemove('circle0')" value="删除id为circle0的覆盖物" />
        <input class="btn btn-default" type="button" id="222" onclick="TYClear()" value="全部删除" />
    </div>
    <div id="codes" style=" position:absolute; bottom:0; width:100%; height:290px;display:none">
        <table class="table table-condensed">
            <tr><th>代码</th></tr>
            <tr>
                <td>
                    <textarea class="form-control" style="width:100%;height:250px;">
                        <!DOCTYPE html>
                        <html xmlns="http://www.w3.org/1999/xhtml">
                        <head>
                            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                            <title>批量点绘制</title>
                            <style type="text/css">
                                html, body {
                                    padding: 0;
                                    margin: 0;
                                }

                                #container {
                                    width: 100%;
                                    height: 100%;
                                    position: absolute;
                                }
                            </style>
                            <script src="../MapAPI_JavaScript.min.js"></script>
                        </head>

                        <body>
                            <div id="container"></div>
                            <div class="alert alert-success" style="position:absolute;left:100px;top:20px;">
                                <label>提示：</label><br />
                                1.删除id为circle0的覆盖物可以删除一个圆<br>
                                2.全部删除会清空地图<br>

                            </div>


                            <div style="right :20px; position:absolute; top:60px">

                                <input class="btn btn-default" type="button" id="111" onclick="TYRemove('circle0')" value="删除id为circle0的覆盖物" />
                                <input class="btn btn-default" type="button" id="222" onclick="TYClear()" value="全部删除" />
                            </div>
                            <script type="text/javascript">
                                var option = new TYMapOptions({
                                    contentId: "container",//必填，地图容器
                                    // lnglat: new TYLngLat(114.50, 38.000),//可选 默认ip定位
                                    mapLevel: 12//可选默认 12
                                });
                                TYInitialize(option);
                                //------地图配置------//
                                TYMapConfig(new TYConfigOption());
                                function addpoints(a) {
                                    var data = [];
                                    for (var i = 0; i < 50; i++) {
                                        var p = new TYMarker({
                                            pointId: "divid" + i,
                                            label: new TYLabel({
                                                content: "<span style='color:red;border:1px solid red;background-color:blue;'>自定义的marker标签</span>",
                                                offset: new TYPixel(25, 15)
                                            }),
                                            lnglat: new TYLngLat(114.08 + Math.random() * 0.5, 38.30 + (0.1 * Math.random())),
                                            icon: new TYIcon({
                                                url: 'http://map4.tygps.com/Images/Tymics/greenpoint.png'
                                            })
                                        });
                                        data.push(p);
                                    }
                                    var pointobj = new TYPointOption();
                                    pointobj.pointData = data;
                                    pointobj.pointState.isClearOverlay = false;
                                    pointobj.pointState.isGather = a;
                                    pointobj.pointState.isSetView = false;

                                    //绘制函数
                                    TYDrawPoint(pointobj);
                                }
                                // addpoints();
                                addpoints(false);

                                addcircle();

                                function addcircle() {
                                    var circleArr = [], cirArr = [];
                                    circleArr.push(new TYLngLat(113, 38));

                                    for (var i in circleArr) {
                                        var data = new TYCircle();
                                        data.circleId = "circle" + i;
                                        data.fillColor = "red";
                                        data.fillOpacity = .6;

                                        data.lineColor = "blue";
                                        data.lineOpacity = .8;
                                        data.lineType = null;
                                        data.lineWidth = 4;
                                        data.lnglat = circleArr[i];
                                        data.radius = 10000;
                                        cirArr.push(data)
                                    }

                                    var circle = new TYCircleOption();
                                    circle.circleData = cirArr;
                                    circle.circleState.isClearOverlay = false;
                                    circle.circleState.isSetView = true;
                                    TYDrawCircle(circle);

                                }
                                $(document).ready(function () {
                                    $("#cb").change(function () {
                                        if (this.checked) {
                                            addpoints(true);
                                            TYSetLevel(10);
                                        }
                                        else
                                            addpoints(false);
                                    });
                                })

                                function clickMarker(e) {
                                    alert("触发了回调函数");
                                    console.log(e)
                                }
                                addpolygon();
                                function addpolygon() {
                                    var lnglatArr = [];
                                    lnglatArr.push(new TYLngLat(113, 40));
                                    lnglatArr.push(new TYLngLat(114, 39));
                                    lnglatArr.push(new TYLngLat(111, 40));




                                    var arr = [];
                                    for (var i = 0; i < 1; i++) {
                                        var data = new TYPolygon();
                                        data.fillColor = "red";
                                        data.fillOpacity = 0.7;
                                        data.isEdit = false;
                                        data.lineColor = "blue";
                                        data.lineOpacity = 0.8;
                                        data.lineType = null;
                                        data.lineWidth = 4;
                                        data.lnglat = lnglatArr;

                                        data.polygonId = "poly";
                                        arr.push(data);
                                    }

                                    var polygon = new TYPolygonOption();
                                    polygon.polygonData = arr;
                                    polygon.polygonState.isClearOverlay = false;
                                    polygon.polygonState.isSetView = true;
                                    //实例化事件参数
                                    var event = new TYOverlayEvent();

                                    TYDrawPolygon(polygon);

                                }


                            </script>
                        </body>

                    </html>
                </textarea>

            </td>
        </tr>
    </table>
</div>

<link href="../../Content/bootstrap.min.css" rel="stylesheet" />
<div id="codeshow" data="0" class="btn btn-default" style="position:absolute; right:20px; top:20px;font-family:Helvetica, 'Hiragino Sans GB', 'Microsoft Yahei', '微软雅黑', Arial;"><span class=" glyphicon glyphicon-eye-open"></span> 查看源码</div>
<script>
    $(document).ready(function () {
        $("#codeshow").click(function () {
            var he = $("#container").css("height");
            var hei = he.split("px")[0];
            if ($("#codeshow").attr("data") == "0") {
                $("#container").css("height", (parseInt(hei) - 300) + "px");
                $("#codes").css("display", "block")
                $("#codeshow").removeClass("btn-default").addClass("btn-success");
                $("#codeshow").attr("data", "1")
            } else {
                $("#container").css("height", (parseInt(hei) + 300) + "px");
                $("#codes").css("display", "none")
                $("#codeshow").removeClass("btn-success").addClass("btn-default");
                $("#codeshow").attr("data", "0")
            }
        })
    })
</script>
<script type="text/javascript">
    var option = new TYMapOptions({
        contentId: "container",//必填，地图容器
       // lnglat: new TYLngLat(114.50, 38.000),//可选 默认ip定位
        mapLevel: 12//可选默认 12
    });
    TYInitialize(option);
    //------地图配置------//
    TYMapConfig(new TYConfigOption());
    function addpoints(a) {
        var data = [];
        for (var i = 0; i < 50; i++) {
            var p = new TYMarker({
                pointId: "divid" + i,
                label: new TYLabel({
                    content: "<span style='color:red;border:1px solid red;background-color:blue;'>自定义的marker标签</span>",
                    offset: new TYPixel(25, 15)
                }),
                lnglat: new TYLngLat(114.08 + Math.random() * 0.5, 38.30 + (0.1 * Math.random())),
                icon: new TYIcon({
                    url:'http://map4.tygps.com/Images/Tymics/greenpoint.png'
                })
            });
            data.push(p);
        }
        var pointobj = new TYPointOption();
        pointobj.pointData =  data;
        pointobj.pointState.isClearOverlay = false;
        pointobj.pointState.isGather = a;
        pointobj.pointState.isSetView = false;
        
        //绘制函数
        TYDrawPoint(pointobj);
    }
    // addpoints();
    addpoints(false);

    addcircle();

    function addcircle() {
        var circleArr = [], cirArr = [];
        circleArr.push(new TYLngLat(113, 38));
     
        for (var i in circleArr) {
            var data = new TYCircle();
            data.circleId = "circle" + i;
            data.fillColor = "red";
            data.fillOpacity = .6;
        
            data.lineColor = "blue";
            data.lineOpacity = .8;
            data.lineType = null;
            data.lineWidth = 4;
            data.lnglat = circleArr[i];
            data.radius = 10000;
            cirArr.push(data)
        }

        var circle = new TYCircleOption();
        circle.circleData = cirArr;
        circle.circleState.isClearOverlay = false;
        circle.circleState.isSetView = true;
        TYDrawCircle(circle);

    }
    $(document).ready(function () {
        $("#cb").change(function () {
            if (this.checked) {
                addpoints(true);
                TYSetLevel(10);
            }
            else
                addpoints(false);
        });
    })

    function clickMarker(e) {
        alert("触发了回调函数");
        console.log(e)
    }
    addpolygon();
    function addpolygon() {
        var lnglatArr = [];
        lnglatArr.push(new TYLngLat(113, 40));
        lnglatArr.push(new TYLngLat(114, 39));
        lnglatArr.push(new TYLngLat(111, 40));
 

      

        var arr = [];
        for (var i = 0; i < 1; i++) {
            var data = new TYPolygon();
            data.fillColor = "red";
            data.fillOpacity = 0.7;
            data.isEdit = false;
            data.lineColor = "blue";
            data.lineOpacity = 0.8;
            data.lineType = null;
            data.lineWidth = 4;
           data.lnglat = lnglatArr;
          
            data.polygonId = "poly";
            arr.push(data);
        }

        var polygon = new TYPolygonOption();
        polygon.polygonData = arr;
        polygon.polygonState.isClearOverlay = false;
        polygon.polygonState.isSetView = true;
        //实例化事件参数
        var event = new TYOverlayEvent();
       
        TYDrawPolygon(polygon);

    }

 
</script>
</body>
</html>
