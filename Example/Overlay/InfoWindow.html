<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>弹出窗口</title>
    <style type="text/css">
        html, body {
            padding: 0;
            margin: 0;
        }

        #container {
            width: 100%;
            height: 100%;
            position: absolute;
        }


    </style>
    <script src="../../lib/MapAPI_JavaScript.min.js"></script>

</head>
<body style="overflow:hidden">
    <div id="container"></div>
    <div class="alert alert-success" style="position:absolute; left:100px; top:20px; ">
        <label>提示：</label><br /> 1.点击标注的marker点查看弹出窗口
    </div>

<script type="text/javascript">
    init()

    function init() {
        // 地图初始化
        var map = new TYMapOptions();
        map.contentId = "container";
        map.lnglat = new TYLngLat(100, 35);
        map.mapLevel = 4;
        TYInitialize(map);

        // 地图配置
        TYMapTiles( new TYTilesOptions(TYEnumMapType.TY_Google_IMG));
    }
    var data = [];
    for (var i = 0; i < 20; i++) {
        var p;
        p = new TYMarker();
        //    pointId: "divid" + i,
        //    lnglat: new TYLngLat(113.08 + Math.random() * 0.5, 38.30 + (0.1 * Math.random())),
        //    icon: new TYIcon({
        //        url: "../../Images/logo.png",
        //        size: new TYSize(31, 31)
        //    })
        //});
        p.pointId = "id" + i;//点id
        p.lnglat = new TYLngLat(113.08 + Math.random() * 0.5, 38.30 + (0.1 * Math.random()));//点位置
        if (i % 2 == 0) {
            p.icon = new TYIcon({//点图标对象
                url: "../../Images/logo.png",//点图标地址
                size: new TYSize(31, 31)//图标可视区域
            });
        } else {
            p.icon = new TYIcon();
        }

        data.push(p);
    }
    var pointobj = new TYPointOption();
    pointobj.pointData = data;
    pointobj.pointState.isClearOverlay = true;
    pointobj.pointState.isGather = false;
    pointobj.pointState.isSetView = true;
    //实例化事件参数
    var event = new TYOverlayEvent();
    event.mouseEvent = TYEnumEvent.TY_CLICK;
    event.mouseFunc = clickMarker;
    pointobj.pointState.overlayEvent = event;
    //绘制函数
    TYDrawPoint(pointobj);
    function clickMarker(e) {
        var id = e.pointId.split("d")[1];
        var windowo = new TYInfoWindowOptions();
        //标准弹出框
        if (parseInt(id) % 2 == 0) {
            windowo.width = 300;
            windowo.height = 200;
            windowo.offset = new TYPixel(0, -30);
            windowo.content = "<image src='../../Images/logo.png'> 天远地图欢迎您的使用！<br>";
            windowo.position = new TYLngLat(e.GPSLngLat.GPSLng, e.GPSLngLat.GPSLat);
            windowo.showShadow = true;
            windowo.isCustom = false;
            windowo.enableCloseOnClick = true;
            TYInfoWindow(windowo);
        } else { //自定义
            var htmls="';"
          
      
            htmls += "<div class=\"popover fade top in\" role=\"tooltip\" style=\"left:-150px;width:300px;display: block;\">";
            htmls += "    <div class=\"arrow\"></div>";
            htmls += "        <h3 class=\"popover-title\" >天远地图<span class='glyphicon glyphicon-remove pull-right' onclick='closeinfo()'></span></h3>";
            htmls += "    <div class=\"popover-content\"><image src='../../Images/logo.png'> 天远地图欢迎您的使用！<br></div>";
            htmls += "</div>";

            //windowo.width = 300;
            //windowo.height = 200;
            windowo.offset = new TYPixel(15,-100);
            windowo.content = htmls;
            windowo.position = new TYLngLat(e.GPSLngLat.GPSLng, e.GPSLngLat.GPSLat);
            windowo.showShadow = false;
            windowo.isCustom = true;
           // windowo.enableCloseOnClick = true;
            TYInfoWindow(windowo);
        }

    }
    function closeinfo() {
        TYInfoWindowClose();
    }
</script>
</body>
</html>
