<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
        }

        #container {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .amap-scale-middle {
            height: 4px;
        }

        .amap-scale-edgeleft, .amap-scale-edgeright {
            width: 4px;
        }
    </style>

    <script src="../../Scripts/MapAPI_JavaScript.min.js"></script>
    <script src="../../Scripts/jquery-1.9.1.min.js"></script>
    <link href="../../Content/bootstrap.min.css" rel="stylesheet" />

    <script src="../../Scripts/heatmapData.js"></script>
    <script>
        $(document).ready(function () {
            $("#codeshow").click(function () {
                var he = $("#container").css("height");
                var hei = he.split("px")[0];

                if ($("#codeshow").attr("data") == "0") {
                    $("#container").css("height", (parseInt(hei) - 300) + "px");
                    $("#codes").css("display", "block")
                    $("#codeshow").removeClass("btn-default").addClass("btn-success");
                    $("#codeshow").attr("data", "1")
                } else {
                    $("#container").css("height", (parseInt(hei) + 300) + "px");
                    $("#codes").css("display", "none")
                    $("#codeshow").removeClass("btn-success").addClass("btn-default");
                    $("#codeshow").attr("data", "0")
                }

            })
        })
    </script>
</head>
<body style=" overflow:hidden">

    <div id="container"></div>
    <div id="codes" style=" position:absolute; bottom:0; width:100%; height:290px;display:none">
        <table class="table table-condensed">
            <tr class=" active"><th>代码</th></tr>
            <tr>
                <td>
                    <textarea class="form-control" style=" height:250px; width:100%; border:0">
                        <!DOCTYPE html>
                        <html xmlns="http://www.w3.org/1999/xhtml">
                        <head>
                            <script src="../TYMapAPI_JavaScript.min.js"></script>
                            <script src="../massdata.js"></script>
                            <style>
                                #container {
                                    position: absolute;
                                    width: 100%;
                                    height: 100%;
                                }
                            </style>
                        </head>
                        <body>
                            <div id="container"></div>
                            <button class="btn btn-default" style="position:absolute; right:20px; top:60px;" onclick="heatMap()">加载热力图</button>
                            <div class="alert alert-success" style="position:absolute; left:100px; top:20px; ">
                                <label>提示：</label><br />
                                1.点击“加载热力图”加载热力图
                            </div>
                        </body>
                        <script>

                            var json = new TYMapOptions();
                            json.contentId = "container";
                            json.mapLevel = 10;
                            json.lnglat = new TYLngLat(114.09, 38.30);
                            TYInitialize(json);
                            //------------------------------//

                            //------地图配置------//
                            TYMapConfig(new TYConfigOption());
                            heatMap();
                            function heatMap() {
                                var option = new TYHeatMapOption(
                                    {
                                        heatMapData: {
                                            radius: 25, //给定半径
                                            opacity: [0, 0.8], gradient: {
                                                0.5: 'blue',
                                                0.65: 'rgb(117,211,248)',
                                                0.7: 'rgb(0, 255, 0)',
                                                0.9: '#ffea00',
                                                1.0: 'red'
                                            },
                                            max: 100,
                                            DataSet: heatmapData

                                        }
                                    }
                                    );
                                TYHeatMap(option);
                            }
                        </script>
                    </html>
                </textarea>
            </td>
        </tr>
    </table>
</div>

<button id="codeshow" data="0" class="btn btn-default" style="position:absolute; right:20px; top:20px;"><span class=" glyphicon glyphicon-eye-open"></span> 查看源码</button>
<button class="btn btn-default" style="position:absolute; right:20px; top:60px;" onclick="heatMap()">加载热力图</button>
<div class="alert alert-success" style="position:absolute; left:100px; top:20px; ">
    <label>提示：</label><br />
    1.点击“加载热力图”加载热力图
</div>

<script>

    //------地图初始化------//
    var json = new TYMapOptions();
    json.contentId = "container";
    json.mapLevel=10;
    json.lnglat = new TYLngLat(116.418261, 39.921984);
    TYInitialize(json);
    //------------------------------//

    //------地图配置------//
    TYMapConfig(new TYConfigOption());
    function heatMap() {
        var option = new TYHeatMapOption(
            {
                heatMapData: {
                    radius: 25, //给定半径
                    opacity: [0, 0.8], gradient: {
                        0.5: 'blue',
                        0.65: 'rgb(117,211,248)',
                        0.7: 'rgb(0, 255, 0)',
                        0.9: '#ffea00',
                        1.0: 'red'
                    },
                    max: 100,
                    DataSet: heatmapData
                }
            }
            );
        TYHeatMap(option);
    }
</script>
</body>
</html>
